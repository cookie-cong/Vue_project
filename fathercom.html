<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.bootcss.com/twitter-bootstrap/4.1.3/css/bootstrap.css" rel="stylesheet">
    </head>
    <body>
        <div id="app">
            <myprogress v-bind:v="20" name="one" v-on:child="run"></myprogress><br>
            <myprogress v-bind:v="40" name="two" v-on:child="run"></myprogress><br>
            <myprogress v-bind:v="30" name="three" v-on:child="run"></myprogress><br>
            <myprogress v-bind:v="50" name="four" v-on:child="run"></myprogress><br>
            {{msg}}
        </div>
    </body>
</html>
<script src="./static/js/vue.js"></script>
<script>
//子组件向父组件传数据
//1、使用emit来发出一个自定义事件，并传递一个参数
//子组件通过emit方法把自己的第一个参数传递给父级，父级把第一个参数当成一个
// 事件，触发这个事件接收子级传给父级的数据或执行操作
// 2、父组件在子标签中监听该自定义事件，并添加一个响应该事件的处理方法
// 3、子组件接收父组件响应的事件处理方法
// 4、然后子组件开始处理

// 父组件向子组件传值
// 1、子组件在props中创建一个熟悉，用以接收父组件穿过来的值
// 2、父组件中注册子组件
// 3、在子组件标签中添加子组件props中创建的属性
// 4、把需要传给子组件的值赋给该属性

var myprogress={
    props:["v","name"],
    created(){//生命周期钩子函数，为了让进度条滚动起来 created
        var timer = setInterval(()=>{
                this.n++;
                // console.log(this.v)
                if(this.n===100){
                    clearInterval(timer);
                    //开始发送 子组件向父组件发送
                   this.$emit("child",this.name)
                }
        },100);
    },
    data(){
        return{
            n:this.v
        }
    },
    template:
    `<div class="progress">
        <div class="progress-bar" v-bind:style="{width:n+'%'}">{{n}}%</div>
    </div>`

}
new Vue({
    el:"#app",
    components:{
        myprogress:myprogress 
    },
    data:{
        msg:""
    },
    methods:{
        run(v){
            this.msg="任务"+v+"已完成"
        }
    }
})
</script>